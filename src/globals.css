@import 'tailwindcss';
@import 'tw-animate-css';
@plugin 'tailwind-scrollbar';
@custom-variant dark (&:is(.dark *));

/*
 * @theme vs @theme inline - Critical Difference for CSS Variable Injection
 *
 * WITHOUT inline (@theme):
 * - Variables are injected at :root level globally
 * - Can be overridden by other CSS rules with same or higher specificity
 * - Example: :root { --color-primary: #3b82f6; }
 * - Allows for runtime overrides and theming flexibility
 *
 * WITH inline (@theme inline):
 * - Variables are injected directly where they're being used (scoped injection)
 * - Cannot be easily overridden due to higher specificity in generated CSS
 * - Provides stronger encapsulation but less flexibility
 * - Better performance as variables are resolved at build time
 *
 * Reference: https://stackoverflow.com/questions/79705933/should-i-use-theme-or-theme-inline
 */

@theme inline {
	/* To completely disable the default theme and use only custom values, set the global theme variable namespace to initial: */
	/* --*: initial; */

	/* Configure Tailwind Theme Variables */

	/* Brand Colors */
	--color-sidebar-ring: var(--sidebar-ring);
	--color-sidebar-border: var(--sidebar-border);
	--color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
	--color-sidebar-accent: var(--sidebar-accent);
	--color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
	--color-sidebar-primary: var(--sidebar-primary);
	--color-sidebar-foreground: var(--sidebar-foreground);
	--color-sidebar: var(--sidebar);
	--color-chart-5: var(--chart-5);
	--color-chart-4: var(--chart-4);
	--color-chart-3: var(--chart-3);
	--color-chart-2: var(--chart-2);
	--color-chart-1: var(--chart-1);
	--color-ring: var(--ring);
	--color-input: var(--input);
	--color-border: var(--border);
	--color-destructive: var(--destructive);
	--color-accent-foreground: var(--accent-foreground);
	--color-muted-foreground: var(--muted-foreground);
	--color-muted: var(--muted);
	--color-secondary-foreground: var(--secondary-foreground);
	--color-secondary: var(--secondary);
	--color-primary-foreground: var(--primary-foreground);
	--color-primary: var(--primary);
	--color-popover-foreground: var(--popover-foreground);
	--color-popover: var(--popover);
	--color-card-foreground: var(--card-foreground);
	--color-card: var(--card);
	--color-foreground: var(--foreground);
	--color-background: var(--background);
	--color-subtle: color-mix(in oklab, var(--color-gray) 20%, transparent);
	--color-placeholder: color-mix(in oklab, var(--color-gray) 80%, transparent);
	--color-positive: var(--positive);
	--color-negative: var(--negative);
	--color-neutral: var(--neutral);

	/* Semantic Colors */
	--color-accent: var(--color-blue-700);
	--color-subtle: color-mix(in srgb, var(--color-gray) 20%, rgba(0, 0, 0, 0));
	--color-placeholder: color-mix(in srgb,
			var(--color-gray) 80%,
			rgba(0, 0, 0, 0));
	--color-error: var(--color-red-600);
	--color-success: var(--color-green-600);

	--container-3xs: initial;
	--container-2xs: initial;
	--container-xs: 300px;
	--container-sm: 600px;
	--container-md: 900px;
	--container-lg: 1024px;
	--container-xl: 1200px;
	--container-2xl: 1600px;
	--container-3xl: 1800px;
	--container-max: 2000px;

	--spacing-contain: var(--s-contain);
	--spacing-contain-dynamic: var(--s-contain-dynamic);
	--spacing-section: var(--s-section);
	--spacing-section-half: calc(var(--spacing-section) / 2);
	--spacing-header: var(--height-header);

	--shadow-default: 0px 12px 64px rgba(0, 0, 0, 0.12);

	--height-announcement: var(--h-announcement);
	--height-header: 52px;
	--height-footer: var(--h-footer, 90px);
	--height-main: var(--h-main);
	--height-toolbar: 60px;

	--z-index-popover: calc(var(--z-index-overlay) - 1);
	--z-index-overlay: 100;
	--z-index-dialog: calc(var(--z-index-overlay) + 1);
}

@theme {
	--animate-blinker: blinker 1s linear infinite;

	@keyframes blinker {
		50% {
			opacity: 0;
		}
	}
}

/* Specificity: @layer base < components < utilities */

/* BASE: contains reset rules and default styles */
@layer base {
	:root {
		--font-default: var(--font-ABC-Display), 'Arial', 'Helvetica Neue', 'sans-serif';
		--font-feature: var(--font-basel-typewriter), 'Arial', 'Helvetica Neue', 'sans-serif';

		--t-h-1: 500 30px/0.9 var(--font-default);
		--t-h-2: 500 24px/0.9 var(--font-default);
		--t-h-3: 500 20px/1 var(--font-default);
		--t-h-4: 500 18px/1 var(--font-default);
		--t-h-5: 500 16px/1 var(--font-default);
		--t-h-6: 500 14px/1 var(--font-default);

		--t-b-1: 400 14px/1 var(--font-default);
		--t-b-2: 400 12px/1 var(--font-default);
		--t-l-1: 500 12px/1 var(--font-default);
		--t-l-2: 500 10px/1 var(--font-feature);

		--background: oklch(1 0 0);
		--foreground: oklch(0.145 0 0);
		--card: oklch(1 0 0);
		--card-foreground: oklch(0.145 0 0);
		--popover: oklch(1 0 0);
		--popover-foreground: oklch(0.145 0 0);
		--primary: oklch(0.205 0 0);
		--primary-foreground: oklch(0.985 0 0);
		--secondary: oklch(0.97 0 0);
		--secondary-foreground: oklch(0.205 0 0);
		--muted: oklch(0.97 0 0);
		--muted-foreground: oklch(0.556 0 0);
		--accent: oklch(0.97 0 0);
		--accent-foreground: oklch(0.205 0 0);
		--destructive: oklch(0.577 0.245 27.325);
		--border: oklch(0.922 0 0);
		--input: oklch(0.922 0 0);
		--ring: oklch(0.708 0 0);
		--chart-1: oklch(0.646 0.222 41.116);
		--chart-2: oklch(0.6 0.118 184.704);
		--chart-3: oklch(0.398 0.07 227.392);
		--chart-4: oklch(0.828 0.189 84.429);
		--chart-5: oklch(0.769 0.188 70.08);
		--sidebar: oklch(0.985 0 0);
		--sidebar-foreground: oklch(0.145 0 0);
		--sidebar-primary: oklch(0.205 0 0);
		--sidebar-primary-foreground: oklch(0.985 0 0);
		--sidebar-accent: oklch(0.97 0 0);
		--sidebar-accent-foreground: oklch(0.205 0 0);
		--sidebar-border: oklch(0.922 0 0);
		--sidebar-ring: oklch(0.708 0 0);

		--positive: oklch(0.68 0.15 145);
		--negative: oklch(0.58 0.18 25);
		--neutral: oklch(0.85 0.03 260);

		--s-contain: max(3vw, 15px);
		--s-contain-dynamic: max(var(--s-contain),
				calc((100vw - var(--s-max)) / 2));
		--s-section: 80px;

		--width-sm: min(100vw - calc(var(--s-contain) * 2), var(--container-sm));
		--width-md: min(100vw - calc(var(--s-contain) * 2), var(--container-md));
		--width-lg: min(100vw - calc(var(--s-contain) * 2), var(--container-lg));
		--width-xl: min(100vw - calc(var(--s-contain) * 2), var(--container-xl));
		--width-2xl: min(100vw - calc(var(--s-contain) * 2), var(--container-2xl));
		--width-3xl: min(100vw - calc(var(--s-contain) * 2), var(--container-3xl));
		--width-max: min(100vw - calc(var(--s-contain) * 2), var(--container-max));

		--padding-sm: calc((100vw - var(--width-sm)) / 2);
		--padding-md: calc((100vw - var(--width-md)) / 2);
		--padding-lg: calc((100vw - var(--width-lg)) / 2);
		--padding-xl: calc((100vw - var(--width-xl)) / 2);
		--padding-2xl: calc((100vw - var(--width-2xl)) / 2);
		--padding-3xl: calc((100vw - var(--width-3xl)) / 2);
		--padding-max: calc((100vw - var(--width-max)) / 2);

		--s-vp-height: 100vh;

		@supports (height: 100svh) {
			--s-vp-height: 100svh;
		}

		--h-main: calc(var(--s-vp-height) - var(--height-announcement, 0px) - var(--height-header) - var(--height-footer) - var(--height-toolbar));
	}

	.dark {
		--background: oklch(0.145 0 0);
		--foreground: oklch(0.985 0 0);
		--card: oklch(0.205 0 0);
		--card-foreground: oklch(0.985 0 0);
		--popover: oklch(0.205 0 0);
		--popover-foreground: oklch(0.985 0 0);
		--primary: oklch(0.9491 0 0);
		--primary-foreground: oklch(0.205 0 0);
		--secondary: oklch(0.269 0 0);
		--secondary-foreground: oklch(0.985 0 0);
		--muted: oklch(0.4313 0 0);
		--muted-foreground: oklch(0.708 0 0);
		--accent: oklch(0.269 0 0);
		--accent-foreground: oklch(0.985 0 0);
		--destructive: oklch(0.704 0.191 22.216);
		--border: oklch(1 0 0 / 10%);
		--input: oklch(1 0 0 / 15%);
		--ring: oklch(0.556 0 0);
		--chart-1: oklch(0.488 0.243 264.376);
		--chart-2: oklch(0.696 0.17 162.48);
		--chart-3: oklch(0.769 0.188 70.08);
		--chart-4: oklch(0.627 0.265 303.9);
		--chart-5: oklch(0.645 0.246 16.439);
		--sidebar: oklch(0.205 0 0);
		--sidebar-foreground: oklch(0.985 0 0);
		--sidebar-primary: oklch(0.488 0.243 264.376);
		--sidebar-primary-foreground: oklch(0.985 0 0);
		--sidebar-accent: oklch(0.269 0 0);
		--sidebar-accent-foreground: oklch(0.985 0 0);
		--sidebar-border: oklch(1 0 0 / 10%);
		--sidebar-ring: oklch(0.556 0 0);

		--positive: oklch(0.68 0.16 145);
		--negative: oklch(0.58 0.18 25);
		--neutral: oklch(0.45 0.04 260);
	}

	@variant lg {
		:root {
			--t-h-1: 300 80px/1 var(--font-default);
			--t-h-2: 300 64px/1 var(--font-default);
			--t-h-3: 300 48px/1 var(--font-default);
			--t-h-4: 300 40px/1 var(--font-default);

			--s-section: 96px;
			--h-main: calc(var(--s-vp-height) - var(--height-announcement, 0px) - var(--height-header) - var(--height-footer));
		}
	}

	html {
		@apply bg-black text-white antialiased;
		scroll-behavior: smooth;
		scroll-padding-top: calc(var(--height-announcement, 0px) + var(--height-header, 0px) + 20px);
		font-family: var(--font-default);
	}

	html::selection {
		@apply bg-accent text-foreground [text-shadow:none];
	}

	/* Global disabled state */
	[disabled],
	[aria-disabled='true'] {
		@apply state-disabled;
	}
}

@layer components {

	.wysiwyg,
	.wysiwyg-page {
		>*:not(:last-child) {
			margin-bottom: 20px;
		}

		h1 {
			@apply t-h-1;
		}

		h2 {
			@apply t-h-2;
		}

		h3 {
			@apply t-h-3;
		}

		h4 {
			@apply t-h-4;
		}

		h5,
		h6 {
			@apply t-h-5;
		}

		p,
		ol,
		ul {
			@apply text-pretty;
		}

		h1,
		h2,
		h3,
		h4,
		h5,
		h6 {
			&:not(:first-child) {
				margin-top: 36px;
			}

			a {
				text-decoration: underline;
			}
		}

		p,
		ol,
		ul {
			font: var(--t-b-1);

			a {
				text-decoration: underline;
			}
		}

		ul,
		ol {
			padding-left: 1em;

			li:not(:last-child) {
				margin-bottom: 0.4em;
			}

			ul,
			li {
				margin-top: 0.4em;
			}
		}

		ol {
			list-style-type: decimal;
		}

		ul {
			list-style-type: disc;
		}

		blockquote {
			margin: 30px auto;
			quotes: '\201C' '\201D' '\2018' '\2019';

			&,
			p {
				font: var(--t-h-2);
			}

			p {
				display: inline;
				margin: 0;
			}

			&:before {
				content: open-quote;
				display: inline;
			}

			&:after {
				content: close-quote;
				display: inline;
			}
		}
	}
}

/* UTILITIES */
@layer utilities {
	.custom-touch-manipulation {
		@media (hover: none) and (pointer: coarse) {
			touch-action: manipulation;
		}
	}
}

@utility t-h-1 {
	font: var(--t-h-1);
	letter-spacing: -0.04em;
}

@utility t-h-2 {
	font: var(--t-h-2);
	letter-spacing: -0.02em;
}

@utility t-h-3 {
	font: var(--t-h-3);
	letter-spacing: -0.02em;
}

@utility t-h-4 {
	font: var(--t-h-4);
	letter-spacing: -0.02em;
}

@utility t-h-5 {
	font: var(--t-h-5);
	letter-spacing: -0.02em;
}

@utility t-h-6 {
	font: var(--t-h-6);
	letter-spacing: -0.02em;
}

@utility t-b-1 {
	font: var(--t-b-1);
	letter-spacing: -0.02em;
}

@utility t-b-2 {
	font: var(--t-b-2);
	letter-spacing: -0.02em;
}

@utility t-l-1 {
	font: var(--t-l-1);
	letter-spacing: -0.02em;
}

@utility t-l-2 {
	font: var(--t-l-2);
	letter-spacing: 0.0625em;
}

/* Layouts */

@utility pt-header-space-* {
	padding-top: calc(var(--height-header) + var(--height-announcement) + --value(number) * var(--spacing));
	padding-top: calc(var(--height-header) + var(--height-announcement) + --value([*]));
}

@utility mt-header-space-* {
	margin-top: calc(var(--height-header) + var(--height-announcement) + --value(number) * var(--spacing));
	margin-top: calc(var(--height-header) + var(--height-announcement) + --value([*]));
}

@utility top-header-space-* {
	top: calc(var(--height-header) + var(--height-announcement) + --value(number) * var(--spacing));
	top: calc(var(--height-header) + var(--height-announcement) + --value([*]));
}

@utility p-x-sm {
	padding-inline: var(--padding-sm);
}

@utility p-x-md {
	padding-inline: var(--padding-md);
}

@utility p-x-lg {
	padding-inline: var(--padding-lg);
}

@utility p-x-xl {
	padding-inline: var(--padding-xl);
}

@utility p-x-2xl {
	padding-inline: var(--padding-2xl);
}

@utility p-x-3xl {
	padding-inline: var(--padding-3xl);
}

@utility p-x-max {
	padding-inline: var(--padding-max);
}

/* Position */

@utility p-fill {
	position: absolute;
	width: 100%;
	height: 100%;
	top: 0;
	left: 0;
}

@utility p-center {
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate3d(-50%, -50%, 0);
}

@utility increase-target-size {
	--target-size: 5px;

	&::before {
		content: '';
		display: block;
		position: absolute;
		width: calc(100% + var(--target-size) * 2);
		height: calc(100% + var(--target-size) * 2);
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
	}
}

@utility state-disabled {
	cursor: not-allowed;
	opacity: 0.3;
}